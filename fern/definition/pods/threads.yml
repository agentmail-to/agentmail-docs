# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  global: ../__package__.yml
  pods: __package__.yml
  threads: ../threads.yml
  attachments: ../attachments.yml

service:
  url: Http
  base-path: /pods/{pod_id}/threads
  path-parameters:
    pod_id: pods.PodId
  auth: true

  endpoints:
    list:
      method: GET
      path: ""
      display-name: List Threads
      docs: Retrieves all email threads across all inboxes within a specific pod.
      request:
        name: ListThreadsRequest
        query-parameters:
          limit: optional<global.Limit>
          page_token: optional<global.PageToken>
          labels: optional<global.Labels>
          before: optional<global.Before>
          after: optional<global.After>
          ascending: optional<global.Ascending>
          include_spam: optional<global.IncludeSpam>
          include_blocked: optional<global.IncludeBlocked>
      response: threads.ListThreadsResponse
      errors:
        - global.NotFoundError

    get:
      method: GET
      path: /{thread_id}
      display-name: Get Thread
      docs: Retrieves a complete email thread from any inbox within the specified pod.
      path-parameters:
        thread_id: threads.ThreadId
      response: threads.Thread
      errors:
        - global.NotFoundError

    getAttachment:
      method: GET
      path: /{thread_id}/attachments/{attachment_id}
      display-name: Get Attachment
      docs: Downloads an attachment from any message within a thread in the specified pod.
      path-parameters:
        thread_id: threads.ThreadId
        attachment_id: attachments.AttachmentId
      response: attachments.AttachmentResponse
      errors:
        - global.NotFoundError
