# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  global: __package__.yml

types:
  CredentialId:
    type: string
    docs: ID of credential.

  SmtpUsername:
    type: string
    docs: Username for SMTP access.

  UpdatedAt:
    type: datetime
    docs: Time at which credential was last updated.

  CreatedAt:
    type: datetime
    docs: Time at which credential was created.

  Credential:
    properties:
      credential_id: CredentialId
      smtp_username: SmtpUsername
      updated_at: UpdatedAt
      created_at: CreatedAt

  ListCredentialsResponse:
    properties:
      count: global.Count
      limit: optional<global.Limit>
      next_page_token: optional<global.PageToken>
      credentials:
        type: list<Credential>
        docs: Ordered by `created_at` descending.

  CreateCredentialResponse:
    properties:
      credential_id: CredentialId
      smtp_username: SmtpUsername
      smtp_password:
        type: string
        docs: Password for SMTP access.
      updated_at: UpdatedAt
      created_at: CreatedAt

service:
  base-path: /credentials
  auth: true

  endpoints:
    list:
      method: GET
      path: ""
      display-name: List Credentials
      request:
        name: ListCredentialsRequest
        query-parameters:
          limit: optional<global.Limit>
          page_token: optional<global.PageToken>
      response: ListCredentialsResponse

    get:
      method: GET
      path: /{credential_id}
      display-name: Get Credential
      path-parameters:
        credential_id: CredentialId
      response: Credential
      errors:
        - global.NotFoundError

    create:
      method: POST
      path: ""
      display-name: Create Credential
      response: CreateCredentialResponse
      errors:
        - global.ValidationError

    delete:
      method: DELETE
      path: /{credential_id}
      display-name: Delete Credential
      path-parameters:
        credential_id: CredentialId
      errors:
        - global.NotFoundError
