service:
  base-path: /inboxes
  auth: true

  endpoints:
    createInbox:
      docs: |
        If `username` is not specified, one will be randomly generated.

        `domain` must be one of your organization's verified domains or `agentmail.to`. If `domain` is not specified, it will default to `agentmail.to`.
      method: POST
      path: /
      request: CreateInboxRequest
      response: Inbox
      examples:
        - request:
            username: inbox
          response:
            body:
              id: inbox@agentmail.to
        - request:
            domain: yourdomain.com
          response:
            body:
              id: helpfulagent123@yourdomain.com

    deleteInbox:
      docs: Deletes inbox and all of its threads and messages.
      method: DELETE
      path: /{inbox_id}
      path-parameters:
        inbox_id: string
      errors:
        - InboxDoesNotExistError
      examples:
        - path-parameters:
            inbox_id: inbox@agentmail.to

    sendEmail:
      docs: Sends email from inbox address.
      method: POST
      path: /{inbox_id}/send
      path-parameters:
        inbox_id: string
      request: SendEmailRequest
      response: SendEmailResponse
      errors:
        - InboxDoesNotExistError

types:
  Inbox:
    properties:
      id: string

  CreateInboxRequest:
    properties:
      username: optional<string>
      domain: optional<string>

  SendEmailRequest:
    properties:
      to: list<string>
      cc: optional<list<string>>
      bcc: optional<list<string>>
      subject: optional<string>
      text: optional<string>
      html: optional<string>

  SendEmailResponse:
    properties:
      thread_id: string
      message_id: string

errors:
  InboxDoesNotExistError:
    status-code: 404
    type: string
