# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  shared: __package__.yml

types:
  InboxId:
    type: string
    docs: ID (address) of inbox.

  DisplayName:
    type: string
    docs: "Display name for address: `Display Name <username@domain.com>`."

  Inbox:
    properties:
      inbox_id: InboxId
      organization_id:
        type: string
        docs: ID of organization that owns inbox.
      display_name: DisplayName
      created_at:
        type: datetime
        docs: Time at which inbox was created.
    examples:
      - name: CustomName
        value:
          inbox_id: yourinbox@agentmail.to
          organization_id: 123e4567-e89b-12d3-a456-426614174000
          display_name: Your Inbox
          created_at: 2024-01-15T09:30:00Z
      - name: CustomDomain
        value:
          inbox_id: helpfulagent123@yourdomain.com
          organization_id: 123e4567-e89b-12d3-a456-426614174000
          display_name: Helpful Agent
          created_at: 2024-01-15T09:30:00Z

  ListInboxesResponse:
    properties:
      inboxes:
        type: list<Inbox>
        docs: Inbox items. Ordered by `created_at` ascending.
      limit: shared.Limit
      count: shared.Count
      last_key: shared.LastKey

  CreateInboxRequest:
    properties:
      username:
        type: optional<string>
        docs: Username of address. Randomly generated if not specified.
      domain:
        type: optional<string>
        docs: Domain of address. Must be verified domain. Defaults to `agentmail.to`.
      display_name: optional<DisplayName>
    examples:
      - name: CustomName
        value:
          username: yourinbox
          display_name: Your Inbox
      - name: CustomDomain
        value:
          domain: yourdomain.com

service:
  base-path: /inboxes
  auth: true

  endpoints:
    listInboxes:
      method: GET
      path: /
      request:
        name: ListInboxesRequest
        query-parameters:
          limit: shared.QueryLimit
          last_key: shared.LastKey
      response: ListInboxesResponse

    getInbox:
      method: GET
      path: /{inbox_id}
      path-parameters:
        inbox_id: InboxId
      response: Inbox
      errors:
        - shared.NotFoundError

    createInbox:
      method: POST
      path: /
      request: CreateInboxRequest
      response: Inbox
      errors:
        - shared.ValidationError
      examples:
        - request: $CreateInboxRequest.CustomName
          response:
            body: $Inbox.CustomName
        - request: $CreateInboxRequest.CustomDomain
          response:
            body: $Inbox.CustomDomain

    deleteInbox:
      method: DELETE
      path: /{inbox_id}
      path-parameters:
        inbox_id: InboxId
      docs: Delete inbox and all of its threads, messages, and attachments.
      errors:
        - shared.NotFoundError
      examples:
        - path-parameters:
            inbox_id: yourinbox@agentmail.to
