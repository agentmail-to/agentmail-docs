# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

navigation:
  - threads.yml
  - messages.yml
  - drafts.yml

imports:
  global: ../__package__.yml

types:
  InboxId:
    type: string
    docs: ID of inbox.

  Inbox:
    properties:
      inbox_id: InboxId
      display_name:
        type: string
        docs: "Display name: `Display Name <username@domain.com>`."
      created_at:
        type: datetime
        docs: Time at which inbox was created.
    examples:
      - name: CustomName
        value:
          inbox_id: yourinbox@agentmail.to
          display_name: Your Inbox
          created_at: 2024-01-15T09:30:00Z
      - name: CustomDomain
        value:
          inbox_id: helpfulagent123@yourdomain.com
          display_name: Helpful Agent
          created_at: 2024-01-15T09:30:00Z

  ListInboxesResponse:
    properties:
      count: global.Count
      limit: optional<global.Limit>
      last_key: optional<global.LastKey>
      inboxes:
        type: list<Inbox>
        docs: Ordered by `created_at` ascending.
    examples:
      - name: CustomName
        value:
          inboxes:
            - inbox_id: yourinbox@agentmail.to
              display_name: Your Inbox
              created_at: 2024-01-15T09:30:00Z
          limit: 10
          count: 1
          last_key: 123e4567-e89b-12d3-a456-426614174000

  CreateInboxRequest:
    properties:
      username:
        type: optional<string>
        docs: Username of address. Randomly generated if not specified.
      domain:
        type: optional<string>
        docs: Domain of address. Must be verified domain. Defaults to `agentmail.to`.
      display_name:
        type: optional<string>
        docs: "Display name: `Display Name <username@domain.com>`. Defaults to `AgentMail`. Pass empty string to omit."
    examples:
      - name: CustomName
        value:
          username: yourinbox
          display_name: Your Inbox
      - name: CustomDomain
        value:
          domain: yourdomain.com

service:
  base-path: ""
  auth: true

  endpoints:
    list:
      method: GET
      path: /inboxes
      display-name: List Inboxes
      request:
        name: ListInboxesRequest
        query-parameters:
          limit: optional<global.Limit>
          last_key: optional<global.LastKey>
      response: ListInboxesResponse
      examples:
        - query-parameters:
            limit: 10
            last_key: 123e4567-e89b-12d3-a456-426614174000
          response:
            body: $ListInboxesResponse.CustomName

    get:
      method: GET
      path: /inboxes/{inbox_id}
      display-name: Get Inbox
      path-parameters:
        inbox_id: InboxId
      response: Inbox
      errors:
        - global.NotFoundError
      examples:
        - path-parameters:
            inbox_id: yourinbox@agentmail.to
          response:
            body: $Inbox.CustomName

    create:
      method: POST
      path: /inboxes
      display-name: Create Inbox
      request: CreateInboxRequest
      response: Inbox
      errors:
        - global.ValidationError
      examples:
        - request: $CreateInboxRequest.CustomName
          response:
            body: $Inbox.CustomName
        - request: $CreateInboxRequest.CustomDomain
          response:
            body: $Inbox.CustomDomain

    # delete:
    #   method: DELETE
    #   path: /inboxes{inbox_id}
    #   display-name: Delete Inbox
    #   path-parameters:
    #     inbox_id: InboxId
    #   docs: Delete inbox and all of its threads, messages, and attachments.
    #   errors:
    #     - global.NotFoundError
    #   examples:
    #     - path-parameters:
    #         inbox_id: yourinbox@agentmail.to
