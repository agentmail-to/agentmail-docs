# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  events: events.yml

types:
  Subscribe:
    properties:
      type: literal<"subscribe">
      event_types: optional<events.EventTypes>
      inbox_ids:
        type: optional<list<string>>
        docs: IDs of the inboxes to subscribe to.
      pod_ids:
        type: optional<list<string>>
        docs: IDs of the pods to subscribe to.

  Subscribed:
    properties:
      type: literal<"subscribed">
      event_types: optional<events.EventTypes>
      inbox_ids:
        type: optional<list<string>>
        docs: IDs of the inboxes that have been subscribed to.
      pod_ids:
        type: optional<list<string>>
        docs: IDs of the pods that have been subscribed to.

channel:
  url: Websockets
  path: /v0
  display-name: Connect
  auth: true
  query-parameters:
    auth_token:
      type: optional<string>
      docs: Your API key. Required if Authorization header is not set.
  messages:
    subscribe:
      origin: client
      body: Subscribe
    subscribed:
      origin: server
      body: Subscribed
    message_received:
      origin: server
      body: events.MessageReceivedEvent
    message_sent:
      origin: server
      body: events.MessageSentEvent
    message_delivered:
      origin: server
      body: events.MessageDeliveredEvent
    message_bounced:
      origin: server
      body: events.MessageBouncedEvent
    message_complained:
      origin: server
      body: events.MessageComplainedEvent
    message_rejected:
      origin: server
      body: events.MessageRejectedEvent
    domain_verified:
      origin: server
      body: events.DomainVerifiedEvent
